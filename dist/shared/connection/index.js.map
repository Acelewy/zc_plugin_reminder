{"version":3,"sources":["../../../src/shared/connection/index.js"],"names":["isConnected","db","start","Mongoose","connect","env","MONGODB","url","useNewUrlParser","useUnifiedTopology","connections","readyState","err","console","log"],"mappings":";;;;;;;;;;;;;;AAMA;;AACA;;AAPA;AACA;AACA;AACA;AACA;AAKA,IAAIA,WAAJ;AACA,IAAIC,EAAJ;eACe;AACd,QAAMC,KAAN,GAAc;AACb,QAAIF,WAAJ,EAAiB,OAAOC,EAAP;;AACjB,QAAI;AACHA,MAAAA,EAAE,GAAG,MAAME,kBAASC,OAAT,CAAiBC,qBAAIC,OAAJ,CAAYC,GAA7B,EAAkC;AAC5CC,QAAAA,eAAe,EAAE,IAD2B;AAE5CC,QAAAA,kBAAkB,EAAE;AAFwB,OAAlC,CAAX;AAIAT,MAAAA,WAAW,GAAGC,EAAE,CAACS,WAAH,CAAe,CAAf,EAAkBC,UAAhC;AACA,aAAOV,EAAP;AACA,KAPD,CAOE,OAAOW,GAAP,EAAY;AACbC,MAAAA,OAAO,CAACC,GAAR,CAAY,+CAAZ,EAA6DF,GAA7D;AACA,gCAAW,KAAKV,KAAhB,EAAuB,IAAvB;AACA,aAAOU,GAAP;AACA;AACD;;AAfa,C","sourcesContent":["/**\n    Copyright 2021, Zuri plugin reminder.\n    All rights reserved.\n    Written By: King Etiosasere, 30th August 2021\n* */\n\nimport Mongoose from 'mongoose'\nimport env from '@config/environment'\n\nlet isConnected\nlet db\nexport default {\n\tasync start() {\n\t\tif (isConnected) return db\n\t\ttry {\n\t\t\tdb = await Mongoose.connect(env.MONGODB.url, {\n\t\t\t\tuseNewUrlParser: true,\n\t\t\t\tuseUnifiedTopology: true,\n\t\t\t})\n\t\t\tisConnected = db.connections[0].readyState\n\t\t\treturn db\n\t\t} catch (err) {\n\t\t\tconsole.log('MongoDB connection failed, retrying in 5 secs', err)\n\t\t\tsetTimeout(this.start, 5000)\n\t\t\treturn err\n\t\t}\n\t},\n}\n"],"file":"index.js"}